<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="SDL2,开发经验,C&C++,游戏制作," />





  <link rel="alternate" href="/atom.xml" title="围城个人博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="项目说明SDL实现一个比较复杂的实例，游戏制作 设计思想UI设计关卡设置（1）屏幕上有两只鸭子从左向右水平移动，鸭子一共有四种走路姿势。当你第一下点击左键，第一只鸭子停止运动，点击第二下左键，第二只鸭子停止运动。当两只鸭子停止时的动作相同时，玩家就赢了；当两只鸭子停止时的动作不同或者有一只鸭子到达屏幕的另一端时，则玩家就输了。（2）屏幕上有三只猫从屏幕的左侧向右侧移动，三只猫的移动方向各不相同。猫">
<meta name="keywords" content="SDL2,开发经验,C&amp;C++,游戏制作">
<meta property="og:type" content="article">
<meta property="og:title" content="SDL2游戏制作实例">
<meta property="og:url" content="http://yoursite.com/2015/12/21/SDL2游戏制作实例/index.html">
<meta property="og:site_name" content="围城个人博客">
<meta property="og:description" content="项目说明SDL实现一个比较复杂的实例，游戏制作 设计思想UI设计关卡设置（1）屏幕上有两只鸭子从左向右水平移动，鸭子一共有四种走路姿势。当你第一下点击左键，第一只鸭子停止运动，点击第二下左键，第二只鸭子停止运动。当两只鸭子停止时的动作相同时，玩家就赢了；当两只鸭子停止时的动作不同或者有一只鸭子到达屏幕的另一端时，则玩家就输了。（2）屏幕上有三只猫从屏幕的左侧向右侧移动，三只猫的移动方向各不相同。猫">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://img.blog.csdn.net/20160409003102611">
<meta property="og:image" content="http://img.blog.csdn.net/20160409003115283">
<meta property="og:image" content="http://img.blog.csdn.net/20160409003130206">
<meta property="og:image" content="http://img.blog.csdn.net/20160206132512899">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003755878">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003807863">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003819488">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003834643">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003850112">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003859300">
<meta property="og:image" content="http://img.blog.csdn.net/20160410003909425">
<meta property="og:updated_time" content="2017-09-24T07:07:34.575Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SDL2游戏制作实例">
<meta name="twitter:description" content="项目说明SDL实现一个比较复杂的实例，游戏制作 设计思想UI设计关卡设置（1）屏幕上有两只鸭子从左向右水平移动，鸭子一共有四种走路姿势。当你第一下点击左键，第一只鸭子停止运动，点击第二下左键，第二只鸭子停止运动。当两只鸭子停止时的动作相同时，玩家就赢了；当两只鸭子停止时的动作不同或者有一只鸭子到达屏幕的另一端时，则玩家就输了。（2）屏幕上有三只猫从屏幕的左侧向右侧移动，三只猫的移动方向各不相同。猫">
<meta name="twitter:image" content="http://img.blog.csdn.net/20160409003102611">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> SDL2游戏制作实例 | 围城个人博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">围城个人博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">人丑就要多读书</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="/projects" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            menu.projects
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                SDL2游戏制作实例
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-21T00:35:18+08:00" content="2015-12-21">
              2015-12-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SDL/" itemprop="url" rel="index">
                    <span itemprop="name">SDL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/21/SDL2游戏制作实例/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/21/SDL2游戏制作实例/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="项目说明"><a href="#项目说明" class="headerlink" title="项目说明"></a>项目说明</h2><p>SDL实现一个比较复杂的实例，游戏制作</p>
<h2 id="设计思想"><a href="#设计思想" class="headerlink" title="设计思想"></a>设计思想</h2><h3 id="UI设计"><a href="#UI设计" class="headerlink" title="UI设计"></a>UI设计</h3><h3 id="关卡设置"><a href="#关卡设置" class="headerlink" title="关卡设置"></a>关卡设置</h3><p>（1）屏幕上有两只鸭子从左向右水平移动，鸭子一共有四种走路姿势。当你第一下点击左键，第一只鸭子停止运动，点击第二下左键，第二只鸭子停止运动。<br>当两只鸭子停止时的动作相同时，玩家就赢了；当两只鸭子停止时的动作不同或者有一只鸭子到达屏幕的另一端时，则玩家就输了。<br>（2）屏幕上有三只猫从屏幕的左侧向右侧移动，三只猫的移动方向各不相同。猫一共有六种姿势状态。当你第一下点击左键，第一只猫停止运动，点击第二下左键，第二只猫子停止运动，当你第三下点击左键，第一只猫停止运动。<br>当三只猫停止时的动作相同时，玩家就赢了；当三只猫停止时的动作不同或者有一只猫到达屏幕的另一端时，则玩家就输了。<br>（3）游戏开始时在屏幕随机位置出现一个方块，方块向任意方向飞行。在方块飞出屏幕之前点击中方块区域，则玩家获胜；当玩家在方块飞出屏幕前没有点击或者点击位置在方块区域外，玩家没有获胜。</p>
<h3 id="header-amp-cpp"><a href="#header-amp-cpp" class="headerlink" title="header &amp; cpp"></a>header &amp; cpp</h3><p><img src="http://img.blog.csdn.net/20160409003102611" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20160409003115283" alt="这里写图片描述"></p>
<h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><p><img src="http://img.blog.csdn.net/20160409003130206" alt="这里写图片描述"></p>
<h2 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h2><h3 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a>main.cpp</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector2D.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> FPS = <span class="number">60</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> DELAY_TIME = <span class="number">1000.0f</span> / FPS;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line"></div><div class="line">	Uint32 frameStart, frameTime;</div><div class="line">	</div><div class="line"></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"game init attempt...\n"</span>;</div><div class="line">	<span class="keyword">if</span>(TheGame::Instance()-&gt;init(<span class="string">"Chapter 1"</span>, <span class="number">100</span>, <span class="number">50</span>, WINDOW_WIDTH, WINDOW_HEIGHT,</div><div class="line">		<span class="literal">false</span>))</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"game init success!\n"</span>;</div><div class="line">		<span class="keyword">while</span>(TheGame::Instance()-&gt;running())</div><div class="line">		&#123;</div><div class="line">			frameStart = SDL_GetTicks();</div><div class="line">			TheGame::Instance()-&gt;handleEvents();</div><div class="line">			TheGame::Instance()-&gt;update();</div><div class="line">			TheGame::Instance()-&gt;render();</div><div class="line">			frameTime = SDL_GetTicks() - frameStart;</div><div class="line">			<span class="keyword">if</span>(frameTime&lt; DELAY_TIME)</div><div class="line">			&#123;</div><div class="line">				SDL_Delay((<span class="keyword">int</span>)(DELAY_TIME - frameTime));</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"game init failure - "</span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="string">"\n"</span>;</div><div class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"game closing...\n"</span>;</div><div class="line">	TheGame::Instance()-&gt;clean();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="BackGround"><a href="#BackGround" class="headerlink" title="BackGround"></a>BackGround</h3><h4 id="BackGround-h"><a href="#BackGround-h" class="headerlink" title="BackGround.h"></a>BackGround.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _EEEEE_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _EEEEE_</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Enemy</span> :</span> <span class="keyword">public</span> GameObject</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	Enemy(<span class="keyword">const</span> LoaderParams* pParams) : GameObject(pParams) &#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="comment">//void clean() &#123;&#125;</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h3 id="Game"><a href="#Game" class="headerlink" title="Game"></a>Game</h3><h4 id="Game-h"><a href="#Game-h" class="headerlink" title="Game.h"></a>Game.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __GGGG__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __GGGG__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Player.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameStateMachine.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">class</span> <span class="title">Game</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	~Game() &#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">init</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* title, <span class="keyword">int</span> xpos, <span class="keyword">int</span> ypos, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">int</span> flags)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="comment">/*void draw();*/</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">handleEvents</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">running</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_bRunning; &#125;</div><div class="line">	<span class="function">SDL_Renderer* <span class="title">getRenderer</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_pRenderer; &#125;</div><div class="line">	<span class="function"><span class="keyword">static</span> Game* <span class="title">Instance</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">quit</span><span class="params">()</span> </span>&#123; SDL_Quit(); <span class="built_in">exit</span>(<span class="number">0</span>); &#125;   <span class="comment">//!</span></div><div class="line">	<span class="function">GameStateMachine* <span class="title">getStateMachine</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> m_pGameStateMachine; &#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	Game() &#123;&#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> Game* s_pInstance;</div><div class="line"></div><div class="line">	SDL_Window* m_pWindow;</div><div class="line">	SDL_Renderer* m_pRenderer;</div><div class="line">	<span class="keyword">bool</span> m_bRunning;</div><div class="line"></div><div class="line">	<span class="built_in">vector</span>&lt;GameObject*&gt; m_gameObjects;</div><div class="line"></div><div class="line">	GameStateMachine* m_pGameStateMachine;</div><div class="line">&#125;TheGame;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* defined(__Game__) */</span></span></div></pre></td></tr></table></figure>
<h4 id="Game-cpp"><a href="#Game-cpp" class="headerlink" title="Game.cpp"></a>Game.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Player.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Enemy.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameStateMachine.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line">Game* Game::s_pInstance = <span class="number">0</span>;</div><div class="line"></div><div class="line">Game* Game::Instance()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(s_pInstance == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		s_pInstance = <span class="keyword">new</span> Game();</div><div class="line">		<span class="keyword">return</span> s_pInstance;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s_pInstance;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">bool</span> Game::init(<span class="keyword">const</span> <span class="keyword">char</span>* title, <span class="keyword">int</span> xpos, <span class="keyword">int</span> ypos, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">int</span> flags)</div><div class="line">&#123;</div><div class="line">	<span class="comment">// attempt to initialize SDL</span></div><div class="line">	<span class="keyword">if</span>(SDL_Init(SDL_INIT_EVERYTHING) == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SDL init success\n"</span>;</div><div class="line">		<span class="comment">// init the window</span></div><div class="line">		m_pWindow = SDL_CreateWindow(title, xpos, ypos, width, height, flags);</div><div class="line">		<span class="keyword">if</span>(m_pWindow != <span class="number">0</span>) <span class="comment">// window init success</span></div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"window creation success\n"</span>;</div><div class="line">			m_pRenderer = SDL_CreateRenderer(m_pWindow, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(m_pRenderer != <span class="number">0</span>) <span class="comment">// renderer init success</span></div><div class="line">			&#123;</div><div class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">"renderer creation success\n"</span>;</div><div class="line">				SDL_SetRenderDrawColor(m_pRenderer, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">				<span class="keyword">if</span>(<span class="number">1</span>)</div><div class="line">				&#123;</div><div class="line">					m_pGameStateMachine = <span class="keyword">new</span> GameStateMachine();</div><div class="line">					m_pGameStateMachine-&gt;changeState(<span class="keyword">new</span> MenuState());</div><div class="line"></div><div class="line">				<span class="comment">/*	m_gameObjects.push_back(new BackGround(new LoaderParams(0, 0, 800, 501, "back")));</span></div><div class="line"><span class="comment">					m_gameObjects.push_back(new Player(new LoaderParams(100, 100, 128, 82, "a", 200)));</span></div><div class="line"><span class="comment">					m_gameObjects.push_back(new Player(new LoaderParams(200, 200, 128, 82, "a", 300)));*/</span></div><div class="line">					</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">else</span> </div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">"renderer init fail\n"</span>;</div><div class="line">				<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// renderer init fail</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"window init fail\n"</span>;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// window init fail</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SDL init fail\n"</span>;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// SDL init fail</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"init success\n"</span>;</div><div class="line">	m_bRunning = <span class="literal">true</span>; <span class="comment">// everything inited successfully,start the main loop</span></div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//void Game::draw()</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	for(std::vector&lt;GameObject*&gt;::size_type i = 0; i !=</span></div><div class="line"><span class="comment">//		m_gameObjects.size(); i++)</span></div><div class="line"><span class="comment">//	&#123;</span></div><div class="line"><span class="comment">//		m_gameObjects[i]-&gt;draw();</span></div><div class="line"><span class="comment">//	&#125;</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::render()</div><div class="line">&#123;</div><div class="line">	SDL_RenderClear(m_pRenderer);</div><div class="line">	m_pGameStateMachine-&gt;render();</div><div class="line">	SDL_RenderPresent(m_pRenderer);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::handleEvents()</div><div class="line">&#123;</div><div class="line">	TheInputHandler::Instance()-&gt;update();</div><div class="line">	<span class="comment">//if(TheInputHandler::Instance()-&gt;isKeyDown(SDL_SCANCODE_RETURN))</span></div><div class="line">	<span class="comment">//&#123;</span></div><div class="line">	<span class="comment">//	m_pGameStateMachine-&gt;changeState(new PlayState());</span></div><div class="line">	<span class="comment">//&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//void Game::handleEvents()</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	SDL_Event event;</span></div><div class="line"><span class="comment">//	if(SDL_PollEvent(&amp;event))</span></div><div class="line"><span class="comment">//	&#123;</span></div><div class="line"><span class="comment">//		switch (event.type)</span></div><div class="line"><span class="comment">//		&#123;</span></div><div class="line"><span class="comment">//		case SDL_QUIT:</span></div><div class="line"><span class="comment">//			m_bRunning = false;break;</span></div><div class="line"><span class="comment">//		case SDL_KEYDOWN:</span></div><div class="line"><span class="comment">//            switch( event.key.keysym.sym )</span></div><div class="line"><span class="comment">//            &#123;</span></div><div class="line"><span class="comment">//            case SDLK_a: SDL_Delay(1000); break;</span></div><div class="line"><span class="comment">//            &#125;</span></div><div class="line"><span class="comment">//            break;</span></div><div class="line"><span class="comment">//		default:</span></div><div class="line"><span class="comment">//			break;</span></div><div class="line"><span class="comment">//		&#125;</span></div><div class="line"><span class="comment">//	&#125;</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::update()</div><div class="line">&#123;</div><div class="line">	m_pGameStateMachine-&gt;update();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::clean()</div><div class="line">&#123;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"cleaning game\n"</span>;</div><div class="line">	TheInputHandler::Instance()-&gt;clean();</div><div class="line">	SDL_DestroyWindow(m_pWindow);</div><div class="line">	SDL_DestroyRenderer(m_pRenderer);</div><div class="line">	SDL_Quit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="GameObject"><a href="#GameObject" class="headerlink" title="GameObject"></a>GameObject</h3><h4 id="GameObject-h"><a href="#GameObject-h" class="headerlink" title="GameObject.h"></a>GameObject.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __GSMGSM__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __GSMGSM__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameStateMachine</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pushState</span><span class="params">(GameState* pState)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">changeState</span><span class="params">(GameState* pState)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">popState</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="built_in">vector</span>&lt;GameState*&gt; m_gameStates;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="GameObject-cpp"><a href="#GameObject-cpp" class="headerlink" title="GameObject.cpp"></a>GameObject.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Player.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Enemy.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameStateMachine.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line">Game* Game::s_pInstance = <span class="number">0</span>;</div><div class="line"></div><div class="line">Game* Game::Instance()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(s_pInstance == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		s_pInstance = <span class="keyword">new</span> Game();</div><div class="line">		<span class="keyword">return</span> s_pInstance;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s_pInstance;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">bool</span> Game::init(<span class="keyword">const</span> <span class="keyword">char</span>* title, <span class="keyword">int</span> xpos, <span class="keyword">int</span> ypos, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">int</span> flags)</div><div class="line">&#123;</div><div class="line">	<span class="comment">// attempt to initialize SDL</span></div><div class="line">	<span class="keyword">if</span>(SDL_Init(SDL_INIT_EVERYTHING) == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SDL init success\n"</span>;</div><div class="line">		<span class="comment">// init the window</span></div><div class="line">		m_pWindow = SDL_CreateWindow(title, xpos, ypos, width, height, flags);</div><div class="line">		<span class="keyword">if</span>(m_pWindow != <span class="number">0</span>) <span class="comment">// window init success</span></div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"window creation success\n"</span>;</div><div class="line">			m_pRenderer = SDL_CreateRenderer(m_pWindow, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span>(m_pRenderer != <span class="number">0</span>) <span class="comment">// renderer init success</span></div><div class="line">			&#123;</div><div class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">"renderer creation success\n"</span>;</div><div class="line">				SDL_SetRenderDrawColor(m_pRenderer, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">				<span class="keyword">if</span>(<span class="number">1</span>)</div><div class="line">				&#123;</div><div class="line">					m_pGameStateMachine = <span class="keyword">new</span> GameStateMachine();</div><div class="line">					m_pGameStateMachine-&gt;changeState(<span class="keyword">new</span> MenuState());</div><div class="line"></div><div class="line">				<span class="comment">/*	m_gameObjects.push_back(new BackGround(new LoaderParams(0, 0, 800, 501, "back")));</span></div><div class="line"><span class="comment">					m_gameObjects.push_back(new Player(new LoaderParams(100, 100, 128, 82, "a", 200)));</span></div><div class="line"><span class="comment">					m_gameObjects.push_back(new Player(new LoaderParams(200, 200, 128, 82, "a", 300)));*/</span></div><div class="line">					</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">else</span> </div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="string">"renderer init fail\n"</span>;</div><div class="line">				<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// renderer init fail</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"window init fail\n"</span>;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// window init fail</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SDL init fail\n"</span>;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// SDL init fail</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"init success\n"</span>;</div><div class="line">	m_bRunning = <span class="literal">true</span>; <span class="comment">// everything inited successfully,start the main loop</span></div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//void Game::draw()</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	for(std::vector&lt;GameObject*&gt;::size_type i = 0; i !=</span></div><div class="line"><span class="comment">//		m_gameObjects.size(); i++)</span></div><div class="line"><span class="comment">//	&#123;</span></div><div class="line"><span class="comment">//		m_gameObjects[i]-&gt;draw();</span></div><div class="line"><span class="comment">//	&#125;</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::render()</div><div class="line">&#123;</div><div class="line">	SDL_RenderClear(m_pRenderer);</div><div class="line">	m_pGameStateMachine-&gt;render();</div><div class="line">	SDL_RenderPresent(m_pRenderer);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::handleEvents()</div><div class="line">&#123;</div><div class="line">	TheInputHandler::Instance()-&gt;update();</div><div class="line">	<span class="comment">//if(TheInputHandler::Instance()-&gt;isKeyDown(SDL_SCANCODE_RETURN))</span></div><div class="line">	<span class="comment">//&#123;</span></div><div class="line">	<span class="comment">//	m_pGameStateMachine-&gt;changeState(new PlayState());</span></div><div class="line">	<span class="comment">//&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//void Game::handleEvents()</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	SDL_Event event;</span></div><div class="line"><span class="comment">//	if(SDL_PollEvent(&amp;event))</span></div><div class="line"><span class="comment">//	&#123;</span></div><div class="line"><span class="comment">//		switch (event.type)</span></div><div class="line"><span class="comment">//		&#123;</span></div><div class="line"><span class="comment">//		case SDL_QUIT:</span></div><div class="line"><span class="comment">//			m_bRunning = false;break;</span></div><div class="line"><span class="comment">//		case SDL_KEYDOWN:</span></div><div class="line"><span class="comment">//            switch( event.key.keysym.sym )</span></div><div class="line"><span class="comment">//            &#123;</span></div><div class="line"><span class="comment">//            case SDLK_a: SDL_Delay(1000); break;</span></div><div class="line"><span class="comment">//            &#125;</span></div><div class="line"><span class="comment">//            break;</span></div><div class="line"><span class="comment">//		default:</span></div><div class="line"><span class="comment">//			break;</span></div><div class="line"><span class="comment">//		&#125;</span></div><div class="line"><span class="comment">//	&#125;</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::update()</div><div class="line">&#123;</div><div class="line">	m_pGameStateMachine-&gt;update();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Game::clean()</div><div class="line">&#123;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"cleaning game\n"</span>;</div><div class="line">	TheInputHandler::Instance()-&gt;clean();</div><div class="line">	SDL_DestroyWindow(m_pWindow);</div><div class="line">	SDL_DestroyRenderer(m_pRenderer);</div><div class="line">	SDL_Quit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="GameOverState"><a href="#GameOverState" class="headerlink" title="GameOverState"></a>GameOverState</h3><h4 id="GameOverState-h"><a href="#GameOverState-h" class="headerlink" title="GameOverState.h"></a>GameOverState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __GOSGOS__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span>	__GOSGOS__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> over_states</div><div class="line">&#123;</div><div class="line">	LOSE = <span class="number">0</span>,</div><div class="line">	WIN = <span class="number">1</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameOverState</span> :</span> <span class="keyword">public</span> GameState</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	GameOverState(<span class="keyword">int</span> state) : m_state(state) &#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setS</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123; m_state = s; &#125;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPS</span><span class="params">(<span class="keyword">int</span> ps)</span> </span>&#123; pre_sta = ps;&#125;</div><div class="line">	<span class="keyword">virtual</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> s_gameOverID;&#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_gameOverToMain</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_restartPlay</span><span class="params">()</span></span>;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">string</span> s_gameOverID;</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;GameObject*&gt; m_gameObjects;</div><div class="line">	<span class="keyword">int</span> m_state;   <span class="comment">//要显示输赢的状态</span></div><div class="line">	<span class="keyword">static</span> <span class="keyword">int</span> pre_sta;   <span class="comment">//OVER之前的状态</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="GameOverState-cpp"><a href="#GameOverState-cpp" class="headerlink" title="GameOverState.cpp"></a>GameOverState.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameOverState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuButton.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LevelState.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="built_in">string</span> GameOverState::s_gameOverID = <span class="string">"GAMEOVER"</span>;</div><div class="line"><span class="keyword">int</span> GameOverState::pre_sta = LEVEL1;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameOverState::s_gameOverToMain()</div><div class="line">&#123;</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(<span class="keyword">new</span></div><div class="line">		MenuState());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//*********************************************************</span></div><div class="line"><span class="keyword">void</span> GameOverState::s_restartPlay()</div><div class="line">&#123;</div><div class="line">	GameState *p =  <span class="keyword">new</span> PlayState();</div><div class="line">	p-&gt;setS(pre_sta);</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(p);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> GameOverState::onEnter()</div><div class="line">&#123;</div><div class="line">	TheInputHandler::Instance()-&gt;reset();</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(m_state == LOSE)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/gameover.png"</span>,</div><div class="line">			<span class="string">"over"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/win.png"</span>,</div><div class="line">			<span class="string">"over"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/main.png"</span>,</div><div class="line">		<span class="string">"mainbutton"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/restart.png"</span>,</div><div class="line">		<span class="string">"restartbutton"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	GameObject* gameOverText = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">400</span>, <span class="number">100</span>, <span class="number">190</span>, <span class="number">50</span>, <span class="string">"over"</span>));</div><div class="line">	GameObject* button1 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">350</span>, <span class="number">200</span>,</div><div class="line">		<span class="number">300</span>, <span class="number">120</span>, <span class="string">"mainbutton"</span>), s_gameOverToMain);</div><div class="line">	GameObject* button2 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">350</span>, <span class="number">400</span>,</div><div class="line">		<span class="number">300</span>, <span class="number">120</span>, <span class="string">"restartbutton"</span>), s_restartPlay);</div><div class="line">	</div><div class="line">	m_gameObjects.push_back(gameOverText);</div><div class="line">	m_gameObjects.push_back(button1);</div><div class="line">	m_gameObjects.push_back(button2);</div><div class="line">	</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"entering GaveOverState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameOverState::update()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;update();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameOverState::render()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;draw();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> GameOverState::onExit()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;clean();</div><div class="line">	&#125;</div><div class="line">	m_gameObjects.clear();</div><div class="line">	</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"mainbutton"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"restartbutton"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"gameover"</span>);</div><div class="line">	</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exiting GaveOverState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="GameState"><a href="#GameState" class="headerlink" title="GameState"></a>GameState</h3><h4 id="GameState-h"><a href="#GameState-h" class="headerlink" title="GameState.h"></a>GameState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _GSGSGS_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _GSGSGS_</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameState</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>= <span class="number">0</span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span> </span>= <span class="number">0</span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span> </span>= <span class="number">0</span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span> </span>= <span class="number">0</span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setS</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setPS</span><span class="params">(<span class="keyword">int</span> ps)</span> </span>&#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>= <span class="number">0</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h3 id="GameStateMachine-h"><a href="#GameStateMachine-h" class="headerlink" title="GameStateMachine.h"></a>GameStateMachine.h</h3><h4 id="GameStateMachine-h-1"><a href="#GameStateMachine-h-1" class="headerlink" title="GameStateMachine.h"></a>GameStateMachine.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __GSMGSM__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __GSMGSM__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameStateMachine</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pushState</span><span class="params">(GameState* pState)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">changeState</span><span class="params">(GameState* pState)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">popState</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="built_in">vector</span>&lt;GameState*&gt; m_gameStates;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="GameStateMachine-cpp"><a href="#GameStateMachine-cpp" class="headerlink" title="GameStateMachine.cpp"></a>GameStateMachine.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameStateMachine.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> GameStateMachine::pushState(GameState *pState)</div><div class="line">&#123;</div><div class="line">	m_gameStates.push_back(pState);</div><div class="line">	m_gameStates.back()-&gt;onEnter();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameStateMachine::popState()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(!m_gameStates.empty())</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(m_gameStates.back()-&gt;onExit())</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">delete</span> m_gameStates.back();</div><div class="line">			m_gameStates.pop_back();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameStateMachine::changeState(GameState *pState)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(!m_gameStates.empty())</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(m_gameStates.back()-&gt;getStateID() == pState-&gt;getStateID())</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span>; <span class="comment">// do nothing</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m_gameStates.size(); i++)</div><div class="line">		&#123;</div><div class="line">			m_gameStates[i]-&gt;onExit();</div><div class="line">			<span class="keyword">delete</span> m_gameStates[i];</div><div class="line">			m_gameStates.clear();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// push back our new state</span></div><div class="line">	m_gameStates.push_back(pState);</div><div class="line">	<span class="comment">// initialise it</span></div><div class="line">	m_gameStates.back()-&gt;onEnter();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameStateMachine::update()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(!m_gameStates.empty())</div><div class="line">	&#123;</div><div class="line">		m_gameStates.back()-&gt;update();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> GameStateMachine::render()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(!m_gameStates.empty())</div><div class="line">	&#123;</div><div class="line">		m_gameStates.back()-&gt;render();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="InputHandler"><a href="#InputHandler" class="headerlink" title="InputHandler"></a>InputHandler</h3><h4 id="InputHandler-h"><a href="#InputHandler-h" class="headerlink" title="InputHandler.h"></a>InputHandler.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __IHIHIH__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __IHIHIH__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> mouse_buttons</div><div class="line">&#123;</div><div class="line">    LEFT = <span class="number">0</span>,</div><div class="line">    MIDDLE = <span class="number">1</span>,</div><div class="line">    RIGHT = <span class="number">2</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">class</span> <span class="title">InputHandler</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">static</span> InputHandler* <span class="title">Instance</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">reset</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">	 <span class="comment">// update and clean the input handler</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">	  <span class="comment">// keyboard events</span></div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isKeyDown</span><span class="params">(SDL_Scancode key)</span> <span class="keyword">const</span></span>;</div><div class="line"></div><div class="line">	 <span class="comment">// mouse events</span></div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">getMouseButtonState</span><span class="params">(<span class="keyword">int</span> buttonNumber)</span> <span class="keyword">const</span></span>;</div><div class="line">    <span class="function">Vector2D* <span class="title">getMousePosition</span><span class="params">()</span> <span class="keyword">const</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	InputHandler();</div><div class="line">	~InputHandler();</div><div class="line">	 InputHandler(<span class="keyword">const</span> InputHandler&amp;);</div><div class="line">	InputHandler&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> InputHandler&amp;);</div><div class="line">	<span class="comment">// handle keyboard events</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onKeyDown</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onKeyUp</span><span class="params">()</span></span>;</div><div class="line">	<span class="comment">// handle mouse events</span></div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onMouseMove</span><span class="params">(SDL_Event&amp; event)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onMouseButtonDown</span><span class="params">(SDL_Event&amp; event)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">onMouseButtonUp</span><span class="params">(SDL_Event&amp; event)</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> InputHandler* s_pInstance;</div><div class="line">	   </div><div class="line">	<span class="comment">// keyboard specific</span></div><div class="line">    <span class="keyword">const</span> Uint8* m_keystates;</div><div class="line"></div><div class="line">	<span class="comment">// mouse specific</span></div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; m_mouseButtonStates;</div><div class="line">    Vector2D* m_mousePosition;</div><div class="line">&#125;TheInputHandler;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="InputHandler-cpp"><a href="#InputHandler-cpp" class="headerlink" title="InputHandler.cpp"></a>InputHandler.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"></div><div class="line">InputHandler* InputHandler::s_pInstance = <span class="number">0</span>;</div><div class="line"></div><div class="line">InputHandler* InputHandler::Instance()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(s_pInstance == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		s_pInstance = <span class="keyword">new</span> InputHandler();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s_pInstance;</div><div class="line">&#125;</div><div class="line"></div><div class="line">InputHandler::InputHandler() :  m_keystates(<span class="number">0</span>),m_mousePosition(<span class="keyword">new</span> Vector2D(<span class="number">0</span>,<span class="number">0</span>))</div><div class="line">&#123;</div><div class="line">    <span class="comment">// create button states for the mouse</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</div><div class="line">    &#123;</div><div class="line">        m_mouseButtonStates.push_back(<span class="literal">false</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">InputHandler::~InputHandler()</div><div class="line">&#123;</div><div class="line">    <span class="comment">// delete anything we created dynamically</span></div><div class="line">    <span class="keyword">delete</span> m_keystates;</div><div class="line">    <span class="keyword">delete</span> m_mousePosition;</div><div class="line">    m_mouseButtonStates.clear();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::reset()</div><div class="line">&#123;</div><div class="line">    m_mouseButtonStates[LEFT] = <span class="literal">false</span>;</div><div class="line">    m_mouseButtonStates[RIGHT] = <span class="literal">false</span>;</div><div class="line">    m_mouseButtonStates[MIDDLE] = <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> InputHandler::isKeyDown(SDL_Scancode key) <span class="keyword">const</span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(m_keystates != <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(m_keystates[key] == <span class="number">1</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> InputHandler::getMouseButtonState(<span class="keyword">int</span> buttonNumber) <span class="keyword">const</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> m_mouseButtonStates[buttonNumber];</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D* InputHandler::getMousePosition() <span class="keyword">const</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> m_mousePosition;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::update()</div><div class="line">&#123;</div><div class="line">	SDL_Event event;</div><div class="line">	<span class="keyword">while</span>(SDL_PollEvent(&amp;event))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">switch</span> (event.type)</div><div class="line">		&#123;</div><div class="line">		<span class="keyword">case</span> SDL_QUIT:</div><div class="line">			TheGame::Instance()-&gt;quit();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> SDL_MOUSEMOTION:</div><div class="line">			onMouseMove(event);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> SDL_MOUSEBUTTONDOWN:</div><div class="line">			onMouseButtonDown(event);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> SDL_MOUSEBUTTONUP:</div><div class="line">			onMouseButtonUp(event);</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> SDL_KEYDOWN:</div><div class="line">			onKeyDown();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> SDL_KEYUP:</div><div class="line">			onKeyUp();</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">default</span>:</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::onKeyDown()</div><div class="line">&#123;</div><div class="line">    m_keystates = SDL_GetKeyboardState(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::onKeyUp()</div><div class="line">&#123;</div><div class="line">    m_keystates = SDL_GetKeyboardState(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::onMouseMove(SDL_Event &amp;event)</div><div class="line">&#123;</div><div class="line">    m_mousePosition-&gt;setX(event.motion.x);</div><div class="line">    m_mousePosition-&gt;setY(event.motion.y);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::onMouseButtonDown(SDL_Event&amp; event)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(event.button.button == SDL_BUTTON_LEFT)</div><div class="line">	&#123;</div><div class="line">		m_mouseButtonStates[LEFT] = <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(event.button.button == SDL_BUTTON_MIDDLE)</div><div class="line">	&#123;</div><div class="line">		m_mouseButtonStates[MIDDLE] = <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(event.button.button == SDL_BUTTON_RIGHT)</div><div class="line">	&#123;</div><div class="line">		m_mouseButtonStates[RIGHT] = <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> InputHandler::onMouseButtonUp(SDL_Event &amp;event)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span>(event.button.button == SDL_BUTTON_LEFT)</div><div class="line">    &#123;</div><div class="line">        m_mouseButtonStates[LEFT] = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(event.button.button == SDL_BUTTON_MIDDLE)</div><div class="line">    &#123;</div><div class="line">        m_mouseButtonStates[MIDDLE] = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(event.button.button == SDL_BUTTON_RIGHT)</div><div class="line">    &#123;</div><div class="line">        m_mouseButtonStates[RIGHT] = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LevelState"><a href="#LevelState" class="headerlink" title="LevelState"></a>LevelState</h3><h4 id="LevelState-h"><a href="#LevelState-h" class="headerlink" title="LevelState.h"></a>LevelState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __LSLSLS__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __LSLSLS__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">enum</span> p_states</div><div class="line">&#123;</div><div class="line">	LEVEL1 = <span class="number">1</span>,</div><div class="line">	LEVEL2 = <span class="number">2</span>,</div><div class="line">	LEVEL3 = <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LevelState</span> :</span> <span class="keyword">public</span> GameState</div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> s_menuID ;&#125;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_ToLevel1</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_ToLevel2</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_ToLevel3</span><span class="params">()</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">string</span> s_menuID;</div><div class="line">	<span class="built_in">vector</span>&lt; GameObject* &gt; m_gameObjects;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="LevelState-cpp"><a href="#LevelState-cpp" class="headerlink" title="LevelState.cpp"></a>LevelState.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LevelState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuButton.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LevelState.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="built_in">string</span> LevelState::s_menuID = <span class="string">"LEVELSTATE"</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> LevelState::update()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;update();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> LevelState::render()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;draw();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> LevelState::onEnter()</div><div class="line">&#123;</div><div class="line">	TheInputHandler::Instance()-&gt;reset();</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/level1.png"</span>, </div><div class="line">		<span class="string">"level1"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/level2.png"</span>,</div><div class="line">		<span class="string">"level2"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/level3.png"</span>,</div><div class="line">		<span class="string">"level3"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/bg.png"</span>,</div><div class="line">		<span class="string">"bg"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	GameObject* Button1 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">225</span>, <span class="number">250</span>,</div><div class="line">		<span class="number">63</span>, <span class="string">"level1"</span>),  s_ToLevel1);</div><div class="line">	GameObject* Button2 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">325</span>, <span class="number">250</span>,</div><div class="line">		<span class="number">63</span>, <span class="string">"level2"</span>),  s_ToLevel2);</div><div class="line">	GameObject* Button3 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">425</span>, <span class="number">250</span>,</div><div class="line">		<span class="number">63</span>, <span class="string">"level3"</span>),  s_ToLevel3);</div><div class="line">	GameObject* back = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">0</span>, <span class="number">0</span>, WINDOW_WIDTH, WINDOW_HEIGHT, <span class="string">"bg"</span>));</div><div class="line"></div><div class="line">	m_gameObjects.push_back(back);</div><div class="line">	m_gameObjects.push_back(Button1);</div><div class="line">	m_gameObjects.push_back(Button2);</div><div class="line">	m_gameObjects.push_back(Button3);</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"entering MenuState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> LevelState::onExit()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;clean();</div><div class="line">	&#125;</div><div class="line">	m_gameObjects.clear();</div><div class="line"></div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"bg"</span>);    </div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"level1"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"level2"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"level3"</span>);    <span class="comment">//my add</span></div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"exiting MenuState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> LevelState::s_ToLevel1()</div><div class="line">&#123;</div><div class="line">	GameState *p = <span class="keyword">new</span> PlayState();</div><div class="line">	p-&gt;setS(LEVEL1);</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(p);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> LevelState::s_ToLevel2()</div><div class="line">&#123;</div><div class="line">	GameState *p = <span class="keyword">new</span> PlayState();</div><div class="line">	p-&gt;setS(LEVEL2);</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(p);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> LevelState::s_ToLevel3()</div><div class="line">&#123;</div><div class="line">	GameState *p = <span class="keyword">new</span> PlayState();</div><div class="line">	p-&gt;setS(LEVEL3);</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(p);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LoaderParams"><a href="#LoaderParams" class="headerlink" title="LoaderParams"></a>LoaderParams</h3><h4 id="LoaderParams-h"><a href="#LoaderParams-h" class="headerlink" title="LoaderParams.h"></a>LoaderParams.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  _LLLL_</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span>  _LLLL_</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoaderParams</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	LoaderParams(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="built_in">string</span></div><div class="line">		textureID) : m_x(x), m_y(y), m_width(width), m_height(height), m_textureID(textureID) &#123;&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_x; &#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getY</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_y; &#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getWidth</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_width; &#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">getHeight</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_height; &#125;</div><div class="line">	<span class="function"><span class="built_in">string</span> <span class="title">getTextureID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> m_textureID; &#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">int</span> m_x;</div><div class="line">	<span class="keyword">int</span> m_y;</div><div class="line">	<span class="keyword">int</span> m_width;</div><div class="line">	<span class="keyword">int</span> m_height;</div><div class="line">	<span class="built_in">string</span> m_textureID;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h3 id="MenuButton"><a href="#MenuButton" class="headerlink" title="MenuButton"></a>MenuButton</h3><h4 id="MenuButton-h"><a href="#MenuButton-h" class="headerlink" title="MenuButton.h"></a>MenuButton.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __MBMBMB__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __MBMBMB__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuButton</span> :</span> <span class="keyword">public</span> GameObject</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	MenuButton(<span class="keyword">const</span> LoaderParams* pParams, <span class="keyword">void</span> (*callback)());</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="comment">/*virtual void draw(); */</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">enum</span> button_state</div><div class="line">	&#123;</div><div class="line">		MOUSE_OUT = <span class="number">0</span>,</div><div class="line">		MOUSE_OVER = <span class="number">1</span>,</div><div class="line">		CLICKED = <span class="number">2</span></div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">void</span> (*m_callback)();</div><div class="line">	<span class="keyword">bool</span> m_bReleased;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="MenuButton-cpp"><a href="#MenuButton-cpp" class="headerlink" title="MenuButton.cpp"></a>MenuButton.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuButton.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"></div><div class="line">MenuButton::MenuButton(<span class="keyword">const</span> LoaderParams* pParams, <span class="keyword">void</span> (*callback)()) : GameObject(pParams), m_callback(callback), </div><div class="line">m_bReleased(<span class="literal">false</span>) &#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">//void MenuButton::draw()</span></div><div class="line"><span class="comment">//&#123;&#125;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">void</span> MenuButton::update()</div><div class="line">&#123;</div><div class="line">	Vector2D* pMousePos = TheInputHandler::Instance()-&gt;getMousePosition();</div><div class="line">	<span class="keyword">if</span>(pMousePos-&gt;getX() &lt; (m_position.getX() + m_width)</div><div class="line">		&amp;&amp; pMousePos-&gt;getX() &gt; m_position.getX()</div><div class="line">		&amp;&amp; pMousePos-&gt;getY() &lt; (m_position.getY() + m_height)</div><div class="line">		&amp;&amp; pMousePos-&gt;getY() &gt; m_position.getY())</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(TheInputHandler::Instance()-&gt;getMouseButtonState(LEFT)</div><div class="line">			<span class="comment">/*&amp;&amp; m_bReleased*/</span>)</div><div class="line">		&#123;</div><div class="line">			m_currentFrame = CLICKED;</div><div class="line">			m_callback(); <span class="comment">// call our callback function</span></div><div class="line">			<span class="comment">/*m_bReleased = false;*/</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!TheInputHandler::Instance()-&gt;getMouseButtonState(LEFT))</div><div class="line">		&#123;</div><div class="line">			<span class="comment">/*m_bReleased = true;*/</span></div><div class="line">			</div><div class="line">			m_currentFrame = MOUSE_OVER;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		m_currentFrame = MOUSE_OUT;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="MenuState"><a href="#MenuState" class="headerlink" title="MenuState"></a>MenuState</h3><h4 id="MenuState-h"><a href="#MenuState-h" class="headerlink" title="MenuState.h"></a>MenuState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __MSMSMS__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __MSMSMS__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuState</span> :</span> <span class="keyword">public</span> GameState</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line">	<span class="keyword">virtual</span> <span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> s_menuID; &#125;</div><div class="line">		<span class="comment">// call back functions for menu items</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_menuToPlay</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_exitFromMenu</span><span class="params">()</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> s_menuID;</div><div class="line">	<span class="built_in">vector</span>&lt;GameObject*&gt; m_gameObjects;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="MenuState-cpp"><a href="#MenuState-cpp" class="headerlink" title="MenuState.cpp"></a>MenuState.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"MenuButton.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameStateMachine.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LevelState.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="built_in">string</span> MenuState::s_menuID = <span class="string">"MENU"</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> MenuState::update()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;update();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> MenuState::render()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;draw();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> MenuState::onEnter()</div><div class="line">&#123;</div><div class="line">	TheInputHandler::Instance()-&gt;reset();</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/f.png"</span>, </div><div class="line">		<span class="string">"first"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/play.png"</span>,</div><div class="line">		<span class="string">"playbutton"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/exit.png"</span>,</div><div class="line">		<span class="string">"exitbutton"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	GameObject* button1 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">225</span>, <span class="number">250</span>,</div><div class="line">		<span class="number">63</span>, <span class="string">"playbutton"</span>), s_menuToPlay);</div><div class="line">	GameObject* button2 = <span class="keyword">new</span> MenuButton(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">375</span>, <span class="number">250</span>,</div><div class="line">		<span class="number">63</span>, <span class="string">"exitbutton"</span>), s_exitFromMenu);</div><div class="line">	GameObject* back = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">0</span>, <span class="number">0</span>, WINDOW_WIDTH, WINDOW_HEIGHT, <span class="string">"first"</span>));</div><div class="line"></div><div class="line">	m_gameObjects.push_back(back);</div><div class="line">	m_gameObjects.push_back(button1);</div><div class="line">	m_gameObjects.push_back(button2);</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"entering MenuState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> MenuState::onExit()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;clean();</div><div class="line">	&#125;</div><div class="line">	m_gameObjects.clear();</div><div class="line"></div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"first"</span>);    <span class="comment">//my add</span></div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"playbutton"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"exitbutton"</span>);</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"exiting MenuState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> MenuState::s_menuToPlay()</div><div class="line">&#123;</div><div class="line">	TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(<span class="keyword">new</span> LevelState());</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> MenuState::s_exitFromMenu()</div><div class="line">&#123;</div><div class="line">	TheGame::Instance()-&gt;quit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="PauseState"><a href="#PauseState" class="headerlink" title="PauseState"></a>PauseState</h3><h4 id="PauseState-h"><a href="#PauseState-h" class="headerlink" title="PauseState.h"></a>PauseState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __PPSPPS__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __PPSPPS__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PauseState</span> :</span> <span class="keyword">public</span> GameState</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> s_pauseID; &#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_pauseToMain</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">s_resumePlay</span><span class="params">()</span></span>;</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">string</span> s_pauseID;</div><div class="line">	<span class="built_in">vector</span>&lt;GameObject*&gt; m_gameObjects;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="PauseState-cpp"><a href="#PauseState-cpp" class="headerlink" title="PauseState.cpp"></a>PauseState.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Enemy.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> Enemy::update()</div><div class="line">&#123;</div><div class="line"></div><div class="line">	m_x = <span class="keyword">int</span> ((SDL_GetTicks() / <span class="number">10</span>));</div><div class="line">	m_currentFrame = <span class="keyword">int</span>(((SDL_GetTicks() / <span class="number">100</span>) % <span class="number">6</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//void Enemy::draw(SDL_Renderer* pRenderer)</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	GameObject::draw(pRenderer);</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"></div><div class="line"><span class="comment">//void Enemy::load(int x, int y, int width, int height, string</span></div><div class="line"><span class="comment">//	textureID)</span></div><div class="line"><span class="comment">//&#123;</span></div><div class="line"><span class="comment">//	GameObject::load(x, y, width, height, textureID);</span></div><div class="line"><span class="comment">//&#125;</span></div></pre></td></tr></table></figure>
<h3 id="Player"><a href="#Player" class="headerlink" title="Player"></a>Player</h3><h4 id="Player-h"><a href="#Player-h" class="headerlink" title="Player.h"></a>Player.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __PLA__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __PLA__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector2D.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> :</span> <span class="keyword">public</span> GameObject</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	Player(<span class="keyword">const</span> LoaderParams* pParams, Vector2D* V , <span class="keyword">int</span> n=<span class="number">1</span> ,<span class="keyword">int</span> t = <span class="number">200</span>, <span class="keyword">int</span> initial = <span class="number">0</span>);</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="comment">/*virtual void setN(int n) &#123; m_n = n; &#125;</span></div><div class="line"><span class="comment">	virtual void setVelocity(float x, float y) &#123; m_velocity.setX(x); m_velocity.setY(y); &#125;*/</span></div><div class="line">	<span class="keyword">virtual</span> ~Player() &#123;&#125;</div><div class="line">	<span class="comment">/*void clean() &#123;&#125;*/</span></div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="comment">/*static int id;*/</span></div><div class="line">	Vector2D  m_velocity;</div><div class="line">	<span class="keyword">int</span> <span class="keyword">m_t</span>;   <span class="comment">//m_t越大，动作速度越小</span></div><div class="line">	<span class="keyword">int</span> m_n;</div><div class="line">	<span class="keyword">int</span> m_init;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="Player-cpp"><a href="#Player-cpp" class="headerlink" title="Player.cpp"></a>Player.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Player.h"</span></span></div><div class="line"></div><div class="line">Player::Player(<span class="keyword">const</span> LoaderParams* pParams, Vector2D* V, <span class="keyword">int</span> n, <span class="keyword">int</span> t , <span class="keyword">int</span> initial) : </div><div class="line">GameObject(pParams), m_n(n), <span class="keyword">m_t</span>(t), m_init(initial)</div><div class="line">&#123; </div><div class="line">	m_velocity.setX(V-&gt;getX()); </div><div class="line">	m_velocity.setY(V-&gt;getY()); </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Player::update()</div><div class="line">&#123;</div><div class="line">	m_position +=  m_velocity;</div><div class="line">	m_currentFrame = <span class="keyword">int</span>( (( m_init + (SDL_GetTicks() / <span class="keyword">m_t</span> )) % m_n ) );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="PlayState"><a href="#PlayState" class="headerlink" title="PlayState"></a>PlayState</h3><h4 id="PlayState-h"><a href="#PlayState-h" class="headerlink" title="PlayState.h"></a>PlayState.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __PSPSPS__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __PSPSPS__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameObject.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlayState</span> :</span> <span class="keyword">public</span> GameState</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>: </div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onEnter</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">onExit</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setS</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123; m_s = s; &#125;</div><div class="line">	<span class="function"><span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">getStateID</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> s_playID; &#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">string</span> s_playID;</div><div class="line">	<span class="keyword">int</span> p_id;    <span class="comment">//若改成全局变量，会出错？？？</span></div><div class="line">	<span class="keyword">int</span> m_s;   <span class="comment">//哪个难度的游戏状态</span></div><div class="line">	<span class="built_in">vector</span>&lt;GameObject*&gt; m_gameObjects;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="PlayState-cpp"><a href="#PlayState-cpp" class="headerlink" title="PlayState.cpp"></a>PlayState.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PlayState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Game.h"</span>;</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"BackGround.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"InputHandler.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"PauseState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"GameOverState.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"LevelState.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="built_in">string</span> PlayState::s_playID = <span class="string">"PLAY"</span>;</div><div class="line"></div><div class="line"><span class="keyword">void</span> PlayState::update()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(TheInputHandler::Instance()-&gt;getMouseButtonState(RIGHT))</div><div class="line">	&#123;</div><div class="line">		TheGame::Instance()-&gt;getStateMachine()-&gt;pushState(<span class="keyword">new</span> PauseState());</div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">	<span class="keyword">if</span>(m_s == LEVEL3)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(InputHandler::Instance()-&gt;getMouseButtonState(LEFT))</div><div class="line">		&#123;</div><div class="line">			SDL_Delay(<span class="number">1000</span>);</div><div class="line">			Vector2D *mou_pos = TheInputHandler::Instance()-&gt;getMousePosition();</div><div class="line">			<span class="comment">//鼠标点击位置</span></div><div class="line">			<span class="keyword">int</span> xpos = mou_pos-&gt;getX();   </div><div class="line">			<span class="keyword">int</span> ypos = mou_pos-&gt;getY();</div><div class="line"></div><div class="line">			Vector2D tar_pos = m_gameObjects[<span class="number">1</span>]-&gt;getPosition();</div><div class="line">			<span class="comment">//目标位置</span></div><div class="line">			<span class="keyword">int</span> _xpos_ = tar_pos.getX();</div><div class="line">			<span class="keyword">int</span> _ypos_ = tar_pos.getY();</div><div class="line">			<span class="keyword">int</span> width = m_gameObjects[<span class="number">1</span>]-&gt;getWidth();</div><div class="line">			<span class="keyword">int</span> height = m_gameObjects[<span class="number">1</span>]-&gt;getHeight();</div><div class="line">			<span class="keyword">if</span>(xpos &gt; _xpos_ &amp;&amp; xpos &lt; (_xpos_ + width) &amp;&amp; ypos &gt; _ypos_ &amp;&amp; ypos &lt; (_ypos_ + height))</div><div class="line">			&#123;</div><div class="line">				GameState * o = <span class="keyword">new</span> GameOverState(WIN);</div><div class="line">				o-&gt;setPS(m_s);</div><div class="line">				TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(o);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				GameState * o = <span class="keyword">new</span> GameOverState(LOSE);</div><div class="line">				o-&gt;setPS(m_s);</div><div class="line">				TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(o);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> </div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(TheInputHandler::Instance()-&gt;getMouseButtonState(LEFT) &amp;&amp; </div><div class="line">			p_id &lt; m_gameObjects.size())</div><div class="line">		&#123;</div><div class="line">			p_id++;</div><div class="line">			<span class="keyword">if</span>(p_id == m_gameObjects.size())</div><div class="line">			&#123;</div><div class="line">				SDL_Delay(<span class="number">1000</span>);</div><div class="line">				<span class="keyword">int</span> tmpFrame = m_gameObjects[<span class="number">1</span>]-&gt;getFrame();</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span> ; i &lt; p_id; i++)</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">if</span>(m_gameObjects[i]-&gt;getFrame() != tmpFrame)</div><div class="line">					&#123;</div><div class="line">						GameState * o = <span class="keyword">new</span> GameOverState(LOSE);</div><div class="line">						o-&gt;setPS(m_s);</div><div class="line">						TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(o);</div><div class="line">						<span class="keyword">return</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				GameState * o = <span class="keyword">new</span> GameOverState(WIN);</div><div class="line">				o-&gt;setPS(m_s);</div><div class="line">				TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(o);</div><div class="line">			&#125;</div><div class="line">			TheInputHandler::Instance()-&gt;reset();	</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = p_id; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;update();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">//走出窗口，认为游戏失败</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> xpos = m_gameObjects[i]-&gt;getPosition().getX();</div><div class="line">		<span class="keyword">int</span> ypos = m_gameObjects[i]-&gt;getPosition().getY();</div><div class="line">		<span class="keyword">if</span>( !( (xpos &lt;= WINDOW_WIDTH) &amp;&amp; (xpos &gt;= <span class="number">0</span>) &amp;&amp; (ypos &lt;= WINDOW_HEIGHT) &amp;&amp; (ypos &gt;= <span class="number">0</span>) ) )</div><div class="line">		&#123;</div><div class="line">			GameState * o = <span class="keyword">new</span> GameOverState(LOSE);</div><div class="line">			o-&gt;setPS(m_s);</div><div class="line">			TheGame::Instance()-&gt;getStateMachine()-&gt;changeState(o);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> PlayState::render()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;draw();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> PlayState::onEnter()</div><div class="line">&#123;</div><div class="line">	PlayState::p_id = <span class="number">1</span>;</div><div class="line">	TheInputHandler::Instance()-&gt;reset();</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(m_s == LEVEL1)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/d.png"</span>,</div><div class="line">			<span class="string">"c"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/back.png"</span>,</div><div class="line">			<span class="string">"back"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">		GameObject* back = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">0</span>, <span class="number">0</span>, WINDOW_WIDTH, WINDOW_HEIGHT, <span class="string">"back"</span>));</div><div class="line">		GameObject* player1 = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">100</span>, <span class="number">71</span>, <span class="number">90</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">2.0</span>, <span class="number">0.0</span>), <span class="number">4</span>, <span class="number">500</span>, <span class="number">1</span>);</div><div class="line">		GameObject* player2 = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">100</span>, <span class="number">300</span>, <span class="number">71</span>, <span class="number">90</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">1.0</span>, <span class="number">0.0</span>), <span class="number">4</span>, <span class="number">500</span>, <span class="number">3</span>);</div><div class="line"></div><div class="line">		m_gameObjects.push_back(back);</div><div class="line">		m_gameObjects.push_back(player1);</div><div class="line">		m_gameObjects.push_back(player2);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(m_s == LEVEL2)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/a.png"</span>,</div><div class="line">			<span class="string">"c"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/third.png"</span>,</div><div class="line">			<span class="string">"back"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">		GameObject* back = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">0</span>, <span class="number">0</span>, WINDOW_WIDTH, WINDOW_HEIGHT, <span class="string">"back"</span>));</div><div class="line">		GameObject* player1 = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">50</span>, <span class="number">50</span>, <span class="number">128</span>, <span class="number">82</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">1.0</span>, <span class="number">1.0</span>), <span class="number">6</span>, <span class="number">500</span>, <span class="number">0</span>);</div><div class="line">		GameObject* player2 = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">50</span>, <span class="number">300</span>, <span class="number">128</span>, <span class="number">82</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">1.0</span>,<span class="number">0.0</span>), <span class="number">6</span>, <span class="number">200</span>, <span class="number">3</span>);</div><div class="line">		GameObject* player3 = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">50</span>, <span class="number">600</span>, <span class="number">128</span>, <span class="number">82</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">1.0</span>,<span class="number">-1.0</span>), <span class="number">6</span>, <span class="number">300</span>, <span class="number">5</span>);</div><div class="line">	</div><div class="line">		m_gameObjects.push_back(back);</div><div class="line">		m_gameObjects.push_back(player1);</div><div class="line">		m_gameObjects.push_back(player2);</div><div class="line">		m_gameObjects.push_back(player3);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(m_s == LEVEL3)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/z.png"</span>,</div><div class="line">			<span class="string">"c"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(!TheTextureManager::Instance()-&gt;load(<span class="string">"setting/second.png"</span>,</div><div class="line">			<span class="string">"back"</span>, TheGame::Instance()-&gt;getRenderer()))</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		GameObject* back = <span class="keyword">new</span> BackGround(<span class="keyword">new</span> LoaderParams(<span class="number">0</span>, <span class="number">0</span>, WINDOW_WIDTH, WINDOW_HEIGHT, <span class="string">"back"</span>));</div><div class="line">		GameObject* player[<span class="number">4</span>]; </div><div class="line">		player[<span class="number">0</span>] = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">50</span>, <span class="number">50</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">20.0</span>, <span class="number">8.0</span>), <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">		player[<span class="number">1</span>] = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">50</span>, <span class="number">550</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">0.0</span>, <span class="number">-10.0</span>), <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">		player[<span class="number">2</span>] = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">900</span>, <span class="number">550</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">-15.0</span>, <span class="number">0.0</span>), <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">		player[<span class="number">3</span>] = <span class="keyword">new</span> Player(<span class="keyword">new</span> LoaderParams(<span class="number">550</span>, <span class="number">550</span>, <span class="number">40</span>, <span class="number">40</span>, <span class="string">"c"</span>), <span class="keyword">new</span> Vector2D(<span class="number">8.0</span>, <span class="number">-10.0</span>), <span class="number">1</span>, <span class="number">100</span>);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> x = rand()%<span class="number">4</span>;</div><div class="line"></div><div class="line">		m_gameObjects.push_back(back);</div><div class="line">		m_gameObjects.push_back(player[x]);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"entering PlayState\n"</span>;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">bool</span> PlayState::onExit()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_gameObjects.size(); i++)</div><div class="line">	&#123;</div><div class="line">		m_gameObjects[i]-&gt;clean();</div><div class="line">	&#125;</div><div class="line">	m_gameObjects.clear();</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"c"</span>);</div><div class="line">	TheTextureManager::Instance()-&gt;clearFromTextureMap(<span class="string">"back"</span>);</div><div class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"exiting PlayState\n"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><h4 id="Text-h"><a href="#Text-h" class="headerlink" title="Text.h"></a>Text.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __TTTTTT__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __TTTTTT__</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Text</span> :</span> <span class="keyword">public</span> GameObject</div><div class="line">&#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h3 id="TextureManager"><a href="#TextureManager" class="headerlink" title="TextureManager"></a>TextureManager</h3><h4 id="TextureManager-h"><a href="#TextureManager-h" class="headerlink" title="TextureManager.h"></a>TextureManager.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __TEXTUREMANAGER__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __TEXTUREMANAGER__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextureManager</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">load</span><span class="params">(<span class="built_in">string</span> fileName, <span class="built_in">string</span> id, SDL_Renderer* pRenderer)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="built_in">string</span> id, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, SDL_Renderer* pRenderer, SDL_RendererFlip flip = SDL_FLIP_NONE)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">drawFrame</span><span class="params">(<span class="built_in">string</span> id, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, </span></span></div><div class="line"><span class="function"><span class="params">		<span class="keyword">int</span> currentRow, <span class="keyword">int</span> currentFrame, SDL_Renderer* pRenderer, SDL_RendererFlip flip = SDL_FLIP_NONE)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">static</span> TextureManager* <span class="title">Instance</span><span class="params">()</span></span>;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clearFromTextureMap</span><span class="params">(<span class="built_in">string</span> id)</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	TextureManager() &#123;&#125;</div><div class="line">	</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">static</span> TextureManager* s_pInstance;</div><div class="line">	<span class="built_in">map</span>&lt;<span class="built_in">string</span>, SDL_Texture*&gt; m_textureMap;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">typedef</span> TextureManager TheTextureManager;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="TextureManager-cpp"><a href="#TextureManager-cpp" class="headerlink" title="TextureManager.cpp"></a>TextureManager.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"TextureManager.h"</span></span></div><div class="line"></div><div class="line">TextureManager* TextureManager::s_pInstance = <span class="number">0</span>;</div><div class="line"></div><div class="line">TextureManager* TextureManager::Instance()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(s_pInstance == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		s_pInstance = <span class="keyword">new</span> TextureManager();</div><div class="line">		<span class="keyword">return</span> s_pInstance;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s_pInstance;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">bool</span> TextureManager::load(<span class="built_in">string</span> fileName, <span class="built_in">string</span> id, SDL_Renderer* pRenderer)</div><div class="line">&#123;</div><div class="line">	SDL_Surface* pTempSurface = IMG_Load(fileName.c_str());</div><div class="line">	<span class="keyword">if</span>(pTempSurface == <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	SDL_Texture* pTexture = SDL_CreateTextureFromSurface(pRenderer, pTempSurface);</div><div class="line">	</div><div class="line">	SDL_FreeSurface(pTempSurface);</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(pTexture != <span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		m_textureMap[id] = pTexture;</div><div class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> TextureManager::draw(<span class="built_in">string</span> id, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height,</div><div class="line">	SDL_Renderer* pRenderer ,SDL_RendererFlip flip)</div><div class="line">&#123;</div><div class="line">	SDL_Rect srcRect;</div><div class="line">	SDL_Rect destRect;</div><div class="line">	srcRect.x = <span class="number">0</span>;</div><div class="line">	srcRect.y = <span class="number">0</span>;</div><div class="line">	srcRect.w = destRect.w = width;</div><div class="line">	srcRect.h = destRect.h = height;</div><div class="line">	destRect.x = x;</div><div class="line">	destRect.y = y;</div><div class="line">	SDL_RenderCopyEx(pRenderer, m_textureMap[id], &amp;srcRect, &amp;destRect, <span class="number">0</span>, <span class="number">0</span>, flip);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> TextureManager::drawFrame(<span class="built_in">string</span> id, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, </div><div class="line">		<span class="keyword">int</span> currentRow, <span class="keyword">int</span> currentFrame, SDL_Renderer* pRenderer, SDL_RendererFlip flip)</div><div class="line">&#123;</div><div class="line">	SDL_Rect srcRect;</div><div class="line">	SDL_Rect destRect;</div><div class="line">	srcRect.x = width * currentFrame;</div><div class="line">	srcRect.y = height * (currentRow - <span class="number">1</span>);</div><div class="line">	srcRect.w = destRect.w = width;</div><div class="line">	srcRect.h = destRect.h = height;</div><div class="line">	destRect.x = x;</div><div class="line">	destRect.y = y;</div><div class="line">	SDL_RenderCopyEx(pRenderer, m_textureMap[id], &amp;srcRect, &amp;destRect, <span class="number">0</span>, <span class="number">0</span>, flip);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> TextureManager::clearFromTextureMap(<span class="built_in">string</span> id)</div><div class="line">&#123;</div><div class="line">	m_textureMap.erase(id);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="utility"><a href="#utility" class="headerlink" title="utility"></a>utility</h3><h4 id="utility-h"><a href="#utility-h" class="headerlink" title="utility.h"></a>utility.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __UTILITY__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __UTILITY__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"SDL.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"SDL_image.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span> ;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> WINDOW_WIDTH 1000</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> WINDOW_HEIGHT 650</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h3 id="Vector2D"><a href="#Vector2D" class="headerlink" title="Vector2D"></a>Vector2D</h3><h4 id="Vector2D-h"><a href="#Vector2D-h" class="headerlink" title="Vector2D.h"></a>Vector2D.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __VDVD__</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> __VDVD__</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"utility.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vector2D</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	Vector2D(): m_x(<span class="number">0.0</span>), m_y(<span class="number">0.0</span>) &#123;&#125;</div><div class="line">	Vector2D(<span class="keyword">float</span> x, <span class="keyword">float</span> y): m_x(x), m_y(y) &#123;&#125;</div><div class="line">	Vector2D(<span class="keyword">const</span> Vector2D&amp; V) &#123; m_x = V.m_x ; m_y = V.m_y ; &#125;</div><div class="line">	<span class="function"><span class="keyword">float</span> <span class="title">getX</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_x; &#125;</div><div class="line">	<span class="function"><span class="keyword">float</span> <span class="title">getY</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> m_y; &#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">float</span> x)</span> </span>&#123; m_x = x; &#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">float</span> y)</span> </span>&#123; m_y = y; &#125;</div><div class="line">	<span class="function"><span class="keyword">float</span> <span class="title">length</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">sqrt</span>(m_x * m_x + m_y * m_y); &#125;</div><div class="line"></div><div class="line">	<span class="comment">//void operator=(const Vector2D&amp; v2);</span></div><div class="line"></div><div class="line">	Vector2D <span class="keyword">operator</span>+(<span class="keyword">const</span> Vector2D&amp; v2) <span class="keyword">const</span>;</div><div class="line">	<span class="keyword">friend</span> Vector2D&amp; <span class="keyword">operator</span>+=(Vector2D&amp; v1, <span class="keyword">const</span> Vector2D&amp; v2);</div><div class="line">	Vector2D <span class="keyword">operator</span>*(<span class="keyword">float</span> scalar);</div><div class="line">	Vector2D&amp; <span class="keyword">operator</span>*=(<span class="keyword">float</span> scalar);</div><div class="line">	Vector2D <span class="keyword">operator</span>-(<span class="keyword">const</span> Vector2D&amp; v2) <span class="keyword">const</span>;</div><div class="line">	<span class="keyword">friend</span> Vector2D&amp; <span class="keyword">operator</span>-=(Vector2D&amp; v1, <span class="keyword">const</span> Vector2D&amp; v2);</div><div class="line">	Vector2D <span class="keyword">operator</span>/(<span class="keyword">float</span> scalar);</div><div class="line">	Vector2D&amp; <span class="keyword">operator</span>/=(<span class="keyword">float</span> scalar);</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">normalize</span><span class="params">()</span></span>;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	<span class="keyword">float</span> m_x;</div><div class="line">	<span class="keyword">float</span> m_y;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
<h4 id="Vector2D-cpp"><a href="#Vector2D-cpp" class="headerlink" title="Vector2D.cpp"></a>Vector2D.cpp</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Vector2D.h"</span></span></div><div class="line"></div><div class="line">Vector2D Vector2D::<span class="keyword">operator</span>+(<span class="keyword">const</span> Vector2D&amp; v2) <span class="keyword">const</span> </div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> Vector2D(m_x + v2.m_x, m_y + v2.m_y); </div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D&amp; <span class="keyword">operator</span>+=(Vector2D&amp; v1, <span class="keyword">const</span> Vector2D&amp; v2)&#123;</div><div class="line">	v1.m_x += v2.m_x;</div><div class="line">	v1.m_y += v2.m_y;</div><div class="line">	<span class="keyword">return</span> v1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D Vector2D::<span class="keyword">operator</span>*(<span class="keyword">float</span> scalar)&#123;</div><div class="line">	<span class="keyword">return</span> Vector2D(m_x * scalar, m_y * scalar);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D&amp;  Vector2D::<span class="keyword">operator</span>*=(<span class="keyword">float</span> scalar)&#123;</div><div class="line">	m_x *= scalar;</div><div class="line">	m_y *= scalar;</div><div class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D Vector2D::<span class="keyword">operator</span>-(<span class="keyword">const</span> Vector2D&amp; v2) <span class="keyword">const</span>&#123;</div><div class="line">	<span class="keyword">return</span> Vector2D(m_x - v2.m_x, m_y - v2.m_y);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D&amp; <span class="keyword">operator</span>-=(Vector2D&amp; v1, <span class="keyword">const</span> Vector2D&amp; v2)&#123;</div><div class="line">	v1.m_x -= v2.m_x;</div><div class="line">	v1.m_y -= v2.m_y;</div><div class="line">	<span class="keyword">return</span> v1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D Vector2D::<span class="keyword">operator</span>/(<span class="keyword">float</span> scalar)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> Vector2D(m_x / scalar, m_y / scalar);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Vector2D&amp; Vector2D::<span class="keyword">operator</span>/=(<span class="keyword">float</span> scalar)</div><div class="line">&#123;</div><div class="line">	m_x /= scalar;</div><div class="line">	m_y /= scalar;</div><div class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> Vector2D::normalize()</div><div class="line">&#123;</div><div class="line">	<span class="keyword">float</span> l = length();</div><div class="line">	<span class="keyword">if</span> ( l &gt; <span class="number">0</span>) <span class="comment">// we never want to attempt to divide by 0</span></div><div class="line">	&#123;</div><div class="line">		(*<span class="keyword">this</span>) *= <span class="number">1</span> / l;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="项目成果"><a href="#项目成果" class="headerlink" title="项目成果"></a>项目成果</h2><h3 id="菜单界面"><a href="#菜单界面" class="headerlink" title="菜单界面"></a>菜单界面</h3><p><img src="http://img.blog.csdn.net/20160206132512899" alt="这里写图片描述"></p>
<h3 id="关卡选择界面"><a href="#关卡选择界面" class="headerlink" title="关卡选择界面"></a>关卡选择界面</h3><p><img src="http://img.blog.csdn.net/20160410003755878" alt="这里写图片描述"></p>
<h3 id="关卡一"><a href="#关卡一" class="headerlink" title="关卡一"></a>关卡一</h3><p><img src="http://img.blog.csdn.net/20160410003807863" alt="这里写图片描述"></p>
<h3 id="关卡二"><a href="#关卡二" class="headerlink" title="关卡二"></a>关卡二</h3><p><img src="http://img.blog.csdn.net/20160410003819488" alt="这里写图片描述"></p>
<h3 id="关卡三"><a href="#关卡三" class="headerlink" title="关卡三"></a>关卡三</h3><p><img src="http://img.blog.csdn.net/20160410003834643" alt="这里写图片描述"></p>
<h3 id="Game-Over"><a href="#Game-Over" class="headerlink" title="Game Over"></a>Game Over</h3><p><img src="http://img.blog.csdn.net/20160410003850112" alt="这里写图片描述"></p>
<h3 id="You-Win"><a href="#You-Win" class="headerlink" title="You Win"></a>You Win</h3><p><img src="http://img.blog.csdn.net/20160410003859300" alt="这里写图片描述"></p>
<h3 id="Resume"><a href="#Resume" class="headerlink" title="Resume"></a>Resume</h3><p><img src="http://img.blog.csdn.net/20160410003909425" alt="这里写图片描述"></p>
<p><hr></p>
<h2 id="特别说明"><a href="#特别说明" class="headerlink" title="*特别说明"></a>*特别说明</h2><p>我最近把我所写的代码都上传到github上了，由于代码文件过多，建议读者去github上clone一下，具体成果读者可以去github上查看README.pdf，内附如何打开应用程序的说明。</p>
<p><a href="https://github.com/TonyZhang94/Projects-Base-On-SDL2.git" target="_blank" rel="external">https://github.com/TonyZhang94/Projects-Base-On-SDL2.git</a></p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/SDL2/" rel="tag">#SDL2</a>
          
            <a href="/tags/开发经验/" rel="tag">#开发经验</a>
          
            <a href="/tags/C-C/" rel="tag">#C&C++</a>
          
            <a href="/tags/游戏制作/" rel="tag">#游戏制作</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/12/08/SDL学习笔记（4）：第二个SDL实例-T9KeyBoard/" rel="next" title="SDL学习笔记（4）：第二个SDL实例 T9KeyBoard">
                <i class="fa fa-chevron-left"></i> SDL学习笔记（4）：第二个SDL实例 T9KeyBoard
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/19/windows访问Linux服务器/" rel="prev" title="windows访问Linux服务器">
                windows访问Linux服务器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2015/12/21/SDL2游戏制作实例/"
           data-title="SDL2游戏制作实例" data-url="http://yoursite.com/2015/12/21/SDL2游戏制作实例/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://img.blog.csdn.net/20170923195118105?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQ2FsbE91V2VpQ2hlbmc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"
               alt="围城" />
          <p class="site-author-name" itemprop="name">围城</p>
          <p class="site-description motion-element" itemprop="description">Java|Python|CC++</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">50</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">82</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/TonyZhang94" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/5321154334" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/callou-wei-cheng" target="_blank">
                  
                    <i class="fa fa-twitter"></i> Zhihu
                  
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
            <div class="links-of-blogroll-title">友情链接</div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://xiaowei1118.github.io/" target="_blank">XiaoWei</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://blog.mythsman.com/" target="_blank">阿尔卑斯君</a>
                </li>
              
            </ul>
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#项目说明"><span class="nav-number">1.</span> <span class="nav-text">项目说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设计思想"><span class="nav-number">2.</span> <span class="nav-text">设计思想</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UI设计"><span class="nav-number">2.1.</span> <span class="nav-text">UI设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关卡设置"><span class="nav-number">2.2.</span> <span class="nav-text">关卡设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#header-amp-cpp"><span class="nav-number">2.3.</span> <span class="nav-text">header & cpp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UML"><span class="nav-number">2.4.</span> <span class="nav-text">UML</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码展示"><span class="nav-number">3.</span> <span class="nav-text">代码展示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#main-cpp"><span class="nav-number">3.1.</span> <span class="nav-text">main.cpp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BackGround"><span class="nav-number">3.2.</span> <span class="nav-text">BackGround</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BackGround-h"><span class="nav-number">3.2.1.</span> <span class="nav-text">BackGround.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Game"><span class="nav-number">3.3.</span> <span class="nav-text">Game</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Game-h"><span class="nav-number">3.3.1.</span> <span class="nav-text">Game.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Game-cpp"><span class="nav-number">3.3.2.</span> <span class="nav-text">Game.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameObject"><span class="nav-number">3.4.</span> <span class="nav-text">GameObject</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GameObject-h"><span class="nav-number">3.4.1.</span> <span class="nav-text">GameObject.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GameObject-cpp"><span class="nav-number">3.4.2.</span> <span class="nav-text">GameObject.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameOverState"><span class="nav-number">3.5.</span> <span class="nav-text">GameOverState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GameOverState-h"><span class="nav-number">3.5.1.</span> <span class="nav-text">GameOverState.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GameOverState-cpp"><span class="nav-number">3.5.2.</span> <span class="nav-text">GameOverState.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameState"><span class="nav-number">3.6.</span> <span class="nav-text">GameState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GameState-h"><span class="nav-number">3.6.1.</span> <span class="nav-text">GameState.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameStateMachine-h"><span class="nav-number">3.7.</span> <span class="nav-text">GameStateMachine.h</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GameStateMachine-h-1"><span class="nav-number">3.7.1.</span> <span class="nav-text">GameStateMachine.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GameStateMachine-cpp"><span class="nav-number">3.7.2.</span> <span class="nav-text">GameStateMachine.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#InputHandler"><span class="nav-number">3.8.</span> <span class="nav-text">InputHandler</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#InputHandler-h"><span class="nav-number">3.8.1.</span> <span class="nav-text">InputHandler.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#InputHandler-cpp"><span class="nav-number">3.8.2.</span> <span class="nav-text">InputHandler.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LevelState"><span class="nav-number">3.9.</span> <span class="nav-text">LevelState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LevelState-h"><span class="nav-number">3.9.1.</span> <span class="nav-text">LevelState.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LevelState-cpp"><span class="nav-number">3.9.2.</span> <span class="nav-text">LevelState.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LoaderParams"><span class="nav-number">3.10.</span> <span class="nav-text">LoaderParams</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LoaderParams-h"><span class="nav-number">3.10.1.</span> <span class="nav-text">LoaderParams.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MenuButton"><span class="nav-number">3.11.</span> <span class="nav-text">MenuButton</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MenuButton-h"><span class="nav-number">3.11.1.</span> <span class="nav-text">MenuButton.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MenuButton-cpp"><span class="nav-number">3.11.2.</span> <span class="nav-text">MenuButton.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MenuState"><span class="nav-number">3.12.</span> <span class="nav-text">MenuState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MenuState-h"><span class="nav-number">3.12.1.</span> <span class="nav-text">MenuState.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MenuState-cpp"><span class="nav-number">3.12.2.</span> <span class="nav-text">MenuState.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PauseState"><span class="nav-number">3.13.</span> <span class="nav-text">PauseState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PauseState-h"><span class="nav-number">3.13.1.</span> <span class="nav-text">PauseState.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PauseState-cpp"><span class="nav-number">3.13.2.</span> <span class="nav-text">PauseState.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Player"><span class="nav-number">3.14.</span> <span class="nav-text">Player</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Player-h"><span class="nav-number">3.14.1.</span> <span class="nav-text">Player.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Player-cpp"><span class="nav-number">3.14.2.</span> <span class="nav-text">Player.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PlayState"><span class="nav-number">3.15.</span> <span class="nav-text">PlayState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PlayState-h"><span class="nav-number">3.15.1.</span> <span class="nav-text">PlayState.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PlayState-cpp"><span class="nav-number">3.15.2.</span> <span class="nav-text">PlayState.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Text"><span class="nav-number">3.16.</span> <span class="nav-text">Text</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Text-h"><span class="nav-number">3.16.1.</span> <span class="nav-text">Text.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TextureManager"><span class="nav-number">3.17.</span> <span class="nav-text">TextureManager</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TextureManager-h"><span class="nav-number">3.17.1.</span> <span class="nav-text">TextureManager.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TextureManager-cpp"><span class="nav-number">3.17.2.</span> <span class="nav-text">TextureManager.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#utility"><span class="nav-number">3.18.</span> <span class="nav-text">utility</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#utility-h"><span class="nav-number">3.18.1.</span> <span class="nav-text">utility.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vector2D"><span class="nav-number">3.19.</span> <span class="nav-text">Vector2D</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector2D-h"><span class="nav-number">3.19.1.</span> <span class="nav-text">Vector2D.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vector2D-cpp"><span class="nav-number">3.19.2.</span> <span class="nav-text">Vector2D.cpp</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#项目成果"><span class="nav-number">4.</span> <span class="nav-text">项目成果</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#菜单界面"><span class="nav-number">4.1.</span> <span class="nav-text">菜单界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关卡选择界面"><span class="nav-number">4.2.</span> <span class="nav-text">关卡选择界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关卡一"><span class="nav-number">4.3.</span> <span class="nav-text">关卡一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关卡二"><span class="nav-number">4.4.</span> <span class="nav-text">关卡二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关卡三"><span class="nav-number">4.5.</span> <span class="nav-text">关卡三</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Game-Over"><span class="nav-number">4.6.</span> <span class="nav-text">Game Over</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#You-Win"><span class="nav-number">4.7.</span> <span class="nav-text">You Win</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resume"><span class="nav-number">4.8.</span> <span class="nav-text">Resume</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特别说明"><span class="nav-number">5.</span> <span class="nav-text">*特别说明</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">围城</span>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"callouweicheng"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
